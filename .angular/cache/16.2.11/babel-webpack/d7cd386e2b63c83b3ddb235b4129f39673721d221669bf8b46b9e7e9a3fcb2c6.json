{"ast":null,"code":"import _asyncToGenerator from \"D:/PFE/API/application/virtual-Iteam/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { defaultModules, QUILL_CONFIG_TOKEN } from 'ngx-quill/config';\nexport * from 'ngx-quill/config';\nimport * as i0 from '@angular/core';\nimport { Injectable, Optional, Inject, EventEmitter, inject, ElementRef, ChangeDetectorRef, PLATFORM_ID, Renderer2, NgZone, SecurityContext, Directive, Input, Output, forwardRef, Component, ViewEncapsulation, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT, isPlatformServer, CommonModule } from '@angular/common';\nimport * as i2 from '@angular/platform-browser';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { defer, isObservable, firstValueFrom, Subscription, fromEvent } from 'rxjs';\nimport { shareReplay, mergeMap, debounceTime } from 'rxjs/operators';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nfunction QuillEditorComponent_ng_template_0_pre_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"pre\", 3);\n  }\n}\nfunction QuillEditorComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, QuillEditorComponent_ng_template_0_pre_0_Template, 1, 0, \"pre\", 2);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    const _r2 = i0.ɵɵreference(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.preserve)(\"ngIfElse\", _r2);\n  }\n}\nfunction QuillEditorComponent_ng_template_2_pre_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"pre\", 3);\n  }\n}\nfunction QuillEditorComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, QuillEditorComponent_ng_template_2_pre_0_Template, 1, 0, \"pre\", 2);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    const _r2 = i0.ɵɵreference(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.preserve)(\"ngIfElse\", _r2);\n  }\n}\nfunction QuillEditorComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 3);\n  }\n}\nconst _c0 = [[[\"\", \"quill-editor-toolbar\", \"\"]]];\nconst _c1 = [\"[quill-editor-toolbar]\"];\nfunction QuillViewComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 1);\n  }\n}\nfunction QuillViewComponent_pre_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"pre\", 1);\n  }\n}\nconst getFormat = (format, configFormat) => {\n  const passedFormat = format || configFormat;\n  return passedFormat || 'html';\n};\nclass QuillService {\n  constructor(injector, config) {\n    var _this = this;\n    this.config = config;\n    this.quill$ = defer( /*#__PURE__*/_asyncToGenerator(function* () {\n      if (!_this.Quill) {\n        // Quill adds events listeners on import https://github.com/quilljs/quill/blob/develop/core/emitter.js#L8\n        // We'd want to use the unpatched `addEventListener` method to have all event callbacks to be run outside of zone.\n        // We don't know yet if the `zone.js` is used or not, just save the value to restore it back further.\n        const maybePatchedAddEventListener = _this.document.addEventListener;\n        // There're 2 types of Angular applications:\n        // 1) zone-full (by default)\n        // 2) zone-less\n        // The developer can avoid importing the `zone.js` package and tells Angular that he/she is responsible for running\n        // the change detection by himself. This is done by \"nooping\" the zone through `CompilerOptions` when bootstrapping\n        // the root module. We fallback to `document.addEventListener` if `__zone_symbol__addEventListener` is not defined,\n        // this means the `zone.js` is not imported.\n        // The `__zone_symbol__addEventListener` is basically a native DOM API, which is not patched by zone.js, thus not even going\n        // through the `zone.js` task lifecycle. You can also access the native DOM API as follows `target[Zone.__symbol__('methodName')]`.\n        _this.document.addEventListener =\n        // eslint-disable-next-line @typescript-eslint/dot-notation\n        _this.document['__zone_symbol__addEventListener'] || _this.document.addEventListener;\n        const quillImport = yield import( /* webpackChunkName: 'quill' */'quill');\n        _this.document.addEventListener = maybePatchedAddEventListener;\n        _this.Quill = quillImport.default ? quillImport.default : quillImport;\n      }\n      // Only register custom options and modules once\n      _this.config.customOptions?.forEach(customOption => {\n        const newCustomOption = _this.Quill.import(customOption.import);\n        newCustomOption.whitelist = customOption.whitelist;\n        _this.Quill.register(newCustomOption, true, _this.config.suppressGlobalRegisterWarning);\n      });\n      return yield _this.registerCustomModules(_this.Quill, _this.config.customModules, _this.config.suppressGlobalRegisterWarning);\n    })).pipe(shareReplay({\n      bufferSize: 1,\n      refCount: true\n    }));\n    this.document = injector.get(DOCUMENT);\n    if (!this.config) {\n      this.config = {\n        modules: defaultModules\n      };\n    }\n  }\n  getQuill() {\n    return this.quill$;\n  }\n  /**\n   * Marked as internal so it won't be available for `ngx-quill` consumers, this is only\n   * internal method to be used within the library.\n   *\n   * @internal\n   */\n  registerCustomModules(Quill, customModules, suppressGlobalRegisterWarning) {\n    return _asyncToGenerator(function* () {\n      if (Array.isArray(customModules)) {\n        // eslint-disable-next-line prefer-const\n        for (let {\n          implementation,\n          path\n        } of customModules) {\n          // The `implementation` might be an observable that resolves the actual implementation,\n          // e.g. if it should be lazy loaded.\n          if (isObservable(implementation)) {\n            implementation = yield firstValueFrom(implementation);\n          }\n          Quill.register(path, implementation, suppressGlobalRegisterWarning);\n        }\n      }\n      // Return `Quill` constructor so we'll be able to re-use its return value except of using\n      // `map` operators, etc.\n      return Quill;\n    })();\n  }\n  static #_ = this.ɵfac = function QuillService_Factory(t) {\n    return new (t || QuillService)(i0.ɵɵinject(i0.Injector), i0.ɵɵinject(QUILL_CONFIG_TOKEN, 8));\n  };\n  static #_2 = this.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: QuillService,\n    factory: QuillService.ɵfac,\n    providedIn: 'root'\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: i0.Injector\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [QUILL_CONFIG_TOKEN]\n      }]\n    }];\n  }, null);\n})();\nclass QuillEditorBase {\n  constructor() {\n    this.required = false;\n    this.customToolbarPosition = 'top';\n    this.styles = null;\n    this.strict = true;\n    this.customOptions = [];\n    this.customModules = [];\n    this.preserveWhitespace = false;\n    this.trimOnValidation = false;\n    this.compareValues = false;\n    this.filterNull = false;\n    /*\n    https://github.com/KillerCodeMonkey/ngx-quill/issues/1257 - fix null value set\n           provide default empty value\n    by default null\n           e.g. defaultEmptyValue=\"\" - empty string\n           <quill-editor\n      defaultEmptyValue=\"\"\n      formControlName=\"message\"\n    ></quill-editor>\n    */\n    this.defaultEmptyValue = null;\n    this.onEditorCreated = new EventEmitter();\n    this.onEditorChanged = new EventEmitter();\n    this.onContentChanged = new EventEmitter();\n    this.onSelectionChanged = new EventEmitter();\n    this.onFocus = new EventEmitter();\n    this.onBlur = new EventEmitter();\n    this.onNativeFocus = new EventEmitter();\n    this.onNativeBlur = new EventEmitter();\n    this.disabled = false; // used to store initial value before ViewInit\n    this.preserve = false;\n    this.toolbarPosition = 'top';\n    this.subscription = null;\n    this.quillSubscription = null;\n    this.elementRef = inject(ElementRef);\n    this.document = inject(DOCUMENT);\n    this.cd = inject(ChangeDetectorRef);\n    this.domSanitizer = inject(DomSanitizer);\n    this.platformId = inject(PLATFORM_ID);\n    this.renderer = inject(Renderer2);\n    this.zone = inject(NgZone);\n    this.service = inject(QuillService);\n    this.valueGetter = (quillEditor, editorElement) => {\n      let html = editorElement.querySelector('.ql-editor').innerHTML;\n      if (html === '<p><br></p>' || html === '<div><br></div>') {\n        html = this.defaultEmptyValue;\n      }\n      let modelValue = html;\n      const format = getFormat(this.format, this.service.config.format);\n      if (format === 'text') {\n        modelValue = quillEditor.getText();\n      } else if (format === 'object') {\n        modelValue = quillEditor.getContents();\n      } else if (format === 'json') {\n        try {\n          modelValue = JSON.stringify(quillEditor.getContents());\n        } catch (e) {\n          modelValue = quillEditor.getText();\n        }\n      }\n      return modelValue;\n    };\n    this.valueSetter = (quillEditor, value) => {\n      const format = getFormat(this.format, this.service.config.format);\n      if (format === 'html') {\n        const sanitize = [true, false].includes(this.sanitize) ? this.sanitize : this.service.config.sanitize || false;\n        if (sanitize) {\n          value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n        }\n        return quillEditor.clipboard.convert(value);\n      } else if (format === 'json') {\n        try {\n          return JSON.parse(value);\n        } catch (e) {\n          return [{\n            insert: value\n          }];\n        }\n      }\n      return value;\n    };\n    this.selectionChangeHandler = (range, oldRange, source) => {\n      const shouldTriggerOnModelTouched = !range && !!this.onModelTouched;\n      // only emit changes when there's any listener\n      if (!this.onBlur.observed && !this.onFocus.observed && !this.onSelectionChanged.observed && !shouldTriggerOnModelTouched) {\n        return;\n      }\n      this.zone.run(() => {\n        if (range === null) {\n          this.onBlur.emit({\n            editor: this.quillEditor,\n            source\n          });\n        } else if (oldRange === null) {\n          this.onFocus.emit({\n            editor: this.quillEditor,\n            source\n          });\n        }\n        this.onSelectionChanged.emit({\n          editor: this.quillEditor,\n          oldRange,\n          range,\n          source\n        });\n        if (shouldTriggerOnModelTouched) {\n          this.onModelTouched();\n        }\n        this.cd.markForCheck();\n      });\n    };\n    this.textChangeHandler = (delta, oldDelta, source) => {\n      // only emit changes emitted by user interactions\n      const text = this.quillEditor.getText();\n      const content = this.quillEditor.getContents();\n      let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n      if (html === '<p><br></p>' || html === '<div><br></div>') {\n        html = this.defaultEmptyValue;\n      }\n      const trackChanges = this.trackChanges || this.service.config.trackChanges;\n      const shouldTriggerOnModelChange = (source === 'user' || trackChanges && trackChanges === 'all') && !!this.onModelChange;\n      // only emit changes when there's any listener\n      if (!this.onContentChanged.observed && !shouldTriggerOnModelChange) {\n        return;\n      }\n      this.zone.run(() => {\n        if (shouldTriggerOnModelChange) {\n          this.onModelChange(this.valueGetter(this.quillEditor, this.editorElem));\n        }\n        this.onContentChanged.emit({\n          content,\n          delta,\n          editor: this.quillEditor,\n          html,\n          oldDelta,\n          source,\n          text\n        });\n        this.cd.markForCheck();\n      });\n    };\n    // eslint-disable-next-line max-len\n    this.editorChangeHandler = (event, current, old, source) => {\n      // only emit changes when there's any listener\n      if (!this.onEditorChanged.observed) {\n        return;\n      }\n      // only emit changes emitted by user interactions\n      if (event === 'text-change') {\n        const text = this.quillEditor.getText();\n        const content = this.quillEditor.getContents();\n        let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n        if (html === '<p><br></p>' || html === '<div><br></div>') {\n          html = this.defaultEmptyValue;\n        }\n        this.zone.run(() => {\n          this.onEditorChanged.emit({\n            content,\n            delta: current,\n            editor: this.quillEditor,\n            event,\n            html,\n            oldDelta: old,\n            source,\n            text\n          });\n          this.cd.markForCheck();\n        });\n      } else {\n        this.zone.run(() => {\n          this.onEditorChanged.emit({\n            editor: this.quillEditor,\n            event,\n            oldRange: old,\n            range: current,\n            source\n          });\n          this.cd.markForCheck();\n        });\n      }\n    };\n  }\n  static normalizeClassNames(classes) {\n    const classList = classes.trim().split(' ');\n    return classList.reduce((prev, cur) => {\n      const trimmed = cur.trim();\n      if (trimmed) {\n        prev.push(trimmed);\n      }\n      return prev;\n    }, []);\n  }\n  ngOnInit() {\n    this.preserve = this.preserveWhitespace;\n    this.toolbarPosition = this.customToolbarPosition;\n  }\n  ngAfterViewInit() {\n    if (isPlatformServer(this.platformId)) {\n      return;\n    }\n    // The `quill-editor` component might be destroyed before the `quill` chunk is loaded and its code is executed\n    // this will lead to runtime exceptions, since the code will be executed on DOM nodes that don't exist within the tree.\n    this.quillSubscription = this.service.getQuill().pipe(mergeMap(Quill => {\n      const promises = [this.service.registerCustomModules(Quill, this.customModules)];\n      const beforeRender = this.beforeRender ?? this.service.config.beforeRender;\n      if (beforeRender) {\n        promises.push(beforeRender());\n      }\n      return Promise.all(promises).then(() => Quill);\n    })).subscribe(Quill => {\n      this.editorElem = this.elementRef.nativeElement.querySelector('[quill-editor-element]');\n      const toolbarElem = this.elementRef.nativeElement.querySelector('[quill-editor-toolbar]');\n      const modules = Object.assign({}, this.modules || this.service.config.modules);\n      if (toolbarElem) {\n        modules.toolbar = toolbarElem;\n      } else if (modules.toolbar === undefined) {\n        modules.toolbar = defaultModules.toolbar;\n      }\n      let placeholder = this.placeholder !== undefined ? this.placeholder : this.service.config.placeholder;\n      if (placeholder === undefined) {\n        placeholder = 'Insert text here ...';\n      }\n      if (this.styles) {\n        Object.keys(this.styles).forEach(key => {\n          this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n        });\n      }\n      if (this.classes) {\n        this.addClasses(this.classes);\n      }\n      this.customOptions.forEach(customOption => {\n        const newCustomOption = Quill.import(customOption.import);\n        newCustomOption.whitelist = customOption.whitelist;\n        Quill.register(newCustomOption, true);\n      });\n      let bounds = this.bounds && this.bounds === 'self' ? this.editorElem : this.bounds;\n      if (!bounds) {\n        bounds = this.service.config.bounds ? this.service.config.bounds : this.document.body;\n      }\n      let debug = this.debug;\n      if (!debug && debug !== false && this.service.config.debug) {\n        debug = this.service.config.debug;\n      }\n      let readOnly = this.readOnly;\n      if (!readOnly && this.readOnly !== false) {\n        readOnly = this.service.config.readOnly !== undefined ? this.service.config.readOnly : false;\n      }\n      let defaultEmptyValue = this.defaultEmptyValue;\n      // eslint-disable-next-line no-prototype-builtins\n      if (this.service.config.hasOwnProperty('defaultEmptyValue')) {\n        defaultEmptyValue = this.service.config.defaultEmptyValue;\n      }\n      let scrollingContainer = this.scrollingContainer;\n      if (!scrollingContainer && this.scrollingContainer !== null) {\n        scrollingContainer = this.service.config.scrollingContainer === null || this.service.config.scrollingContainer ? this.service.config.scrollingContainer : null;\n      }\n      let formats = this.formats;\n      if (!formats && formats === undefined) {\n        formats = this.service.config.formats ? [...this.service.config.formats] : this.service.config.formats === null ? null : undefined;\n      }\n      this.zone.runOutsideAngular(() => {\n        this.quillEditor = new Quill(this.editorElem, {\n          bounds,\n          debug: debug,\n          formats: formats,\n          modules,\n          placeholder,\n          readOnly,\n          defaultEmptyValue,\n          scrollingContainer: scrollingContainer,\n          strict: this.strict,\n          theme: this.theme || (this.service.config.theme ? this.service.config.theme : 'snow')\n        });\n        if (this.onNativeBlur.observed) {\n          // https://github.com/quilljs/quill/issues/2186#issuecomment-533401328\n          this.quillEditor.scroll.domNode.addEventListener('blur', () => this.onNativeBlur.next({\n            editor: this.quillEditor,\n            source: 'dom'\n          }));\n          // https://github.com/quilljs/quill/issues/2186#issuecomment-803257538\n          this.quillEditor.getModule('toolbar').container.addEventListener('mousedown', e => e.preventDefault());\n        }\n        if (this.onNativeFocus.observed) {\n          this.quillEditor.scroll.domNode.addEventListener('focus', () => this.onNativeFocus.next({\n            editor: this.quillEditor,\n            source: 'dom'\n          }));\n        }\n        // Set optional link placeholder, Quill has no native API for it so using workaround\n        if (this.linkPlaceholder) {\n          const tooltip = this.quillEditor?.theme?.tooltip;\n          const input = tooltip?.root?.querySelector('input[data-link]');\n          if (input?.dataset) {\n            input.dataset.link = this.linkPlaceholder;\n          }\n        }\n      });\n      if (this.content) {\n        const format = getFormat(this.format, this.service.config.format);\n        if (format === 'text') {\n          this.quillEditor.setText(this.content, 'silent');\n        } else {\n          const newValue = this.valueSetter(this.quillEditor, this.content);\n          this.quillEditor.setContents(newValue, 'silent');\n        }\n        this.quillEditor.getModule('history').clear();\n      }\n      // initialize disabled status based on this.disabled as default value\n      this.setDisabledState();\n      this.addQuillEventListeners();\n      // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n      // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n      if (!this.onEditorCreated.observed && !this.onValidatorChanged) {\n        return;\n      }\n      // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n      // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n      // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n      requestAnimationFrame(() => {\n        if (this.onValidatorChanged) {\n          this.onValidatorChanged();\n        }\n        this.onEditorCreated.emit(this.quillEditor);\n        this.onEditorCreated.complete();\n      });\n    });\n  }\n  ngOnDestroy() {\n    this.dispose();\n    this.quillSubscription?.unsubscribe();\n    this.quillSubscription = null;\n  }\n  ngOnChanges(changes) {\n    if (!this.quillEditor) {\n      return;\n    }\n    /* eslint-disable @typescript-eslint/dot-notation */\n    if (changes.readOnly) {\n      this.quillEditor.enable(!changes.readOnly.currentValue);\n    }\n    if (changes.placeholder) {\n      this.quillEditor.root.dataset.placeholder = changes.placeholder.currentValue;\n    }\n    if (changes.defaultEmptyValue) {\n      this.quillEditor.root.dataset.defaultEmptyValue = changes.defaultEmptyValue.currentValue;\n    }\n    if (changes.styles) {\n      const currentStyling = changes.styles.currentValue;\n      const previousStyling = changes.styles.previousValue;\n      if (previousStyling) {\n        Object.keys(previousStyling).forEach(key => {\n          this.renderer.removeStyle(this.editorElem, key);\n        });\n      }\n      if (currentStyling) {\n        Object.keys(currentStyling).forEach(key => {\n          this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n        });\n      }\n    }\n    if (changes.classes) {\n      const currentClasses = changes.classes.currentValue;\n      const previousClasses = changes.classes.previousValue;\n      if (previousClasses) {\n        this.removeClasses(previousClasses);\n      }\n      if (currentClasses) {\n        this.addClasses(currentClasses);\n      }\n    }\n    // We'd want to re-apply event listeners if the `debounceTime` binding changes to apply the\n    // `debounceTime` operator or vice-versa remove it.\n    if (changes.debounceTime) {\n      this.addQuillEventListeners();\n    }\n    /* eslint-enable @typescript-eslint/dot-notation */\n  }\n\n  addClasses(classList) {\n    QuillEditorBase.normalizeClassNames(classList).forEach(c => {\n      this.renderer.addClass(this.editorElem, c);\n    });\n  }\n  removeClasses(classList) {\n    QuillEditorBase.normalizeClassNames(classList).forEach(c => {\n      this.renderer.removeClass(this.editorElem, c);\n    });\n  }\n  writeValue(currentValue) {\n    // optional fix for https://github.com/angular/angular/issues/14988\n    if (this.filterNull && currentValue === null) {\n      return;\n    }\n    this.content = currentValue;\n    if (!this.quillEditor) {\n      return;\n    }\n    const format = getFormat(this.format, this.service.config.format);\n    const newValue = this.valueSetter(this.quillEditor, currentValue);\n    if (this.compareValues) {\n      const currentEditorValue = this.quillEditor.getContents();\n      if (JSON.stringify(currentEditorValue) === JSON.stringify(newValue)) {\n        return;\n      }\n    }\n    if (currentValue) {\n      if (format === 'text') {\n        this.quillEditor.setText(currentValue);\n      } else {\n        this.quillEditor.setContents(newValue);\n      }\n      return;\n    }\n    this.quillEditor.setText('');\n  }\n  setDisabledState(isDisabled = this.disabled) {\n    // store initial value to set appropriate disabled status after ViewInit\n    this.disabled = isDisabled;\n    if (this.quillEditor) {\n      if (isDisabled) {\n        this.quillEditor.disable();\n        this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'disabled');\n      } else {\n        if (!this.readOnly) {\n          this.quillEditor.enable();\n        }\n        this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\n      }\n    }\n  }\n  registerOnChange(fn) {\n    this.onModelChange = fn;\n  }\n  registerOnTouched(fn) {\n    this.onModelTouched = fn;\n  }\n  registerOnValidatorChange(fn) {\n    this.onValidatorChanged = fn;\n  }\n  validate() {\n    if (!this.quillEditor) {\n      return null;\n    }\n    const err = {};\n    let valid = true;\n    const text = this.quillEditor.getText();\n    // trim text if wanted + handle special case that an empty editor contains a new line\n    const textLength = this.trimOnValidation ? text.trim().length : text.length === 1 && text.trim().length === 0 ? 0 : text.length - 1;\n    const deltaOperations = this.quillEditor.getContents().ops;\n    const onlyEmptyOperation = deltaOperations && deltaOperations.length === 1 && ['\\n', ''].includes(deltaOperations[0].insert);\n    if (this.minLength && textLength && textLength < this.minLength) {\n      err.minLengthError = {\n        given: textLength,\n        minLength: this.minLength\n      };\n      valid = false;\n    }\n    if (this.maxLength && textLength > this.maxLength) {\n      err.maxLengthError = {\n        given: textLength,\n        maxLength: this.maxLength\n      };\n      valid = false;\n    }\n    if (this.required && !textLength && onlyEmptyOperation) {\n      err.requiredError = {\n        empty: true\n      };\n      valid = false;\n    }\n    return valid ? null : err;\n  }\n  addQuillEventListeners() {\n    this.dispose();\n    // We have to enter the `<root>` zone when adding event listeners, so `debounceTime` will spawn the\n    // `AsyncAction` there w/o triggering change detections. We still re-enter the Angular's zone through\n    // `zone.run` when we emit an event to the parent component.\n    this.zone.runOutsideAngular(() => {\n      this.subscription = new Subscription();\n      this.subscription.add(\n      // mark model as touched if editor lost focus\n      fromEvent(this.quillEditor, 'selection-change').subscribe(([range, oldRange, source]) => {\n        this.selectionChangeHandler(range, oldRange, source);\n      }));\n      // The `fromEvent` supports passing JQuery-style event targets, the editor has `on` and `off` methods which\n      // will be invoked upon subscription and teardown.\n      let textChange$ = fromEvent(this.quillEditor, 'text-change');\n      let editorChange$ = fromEvent(this.quillEditor, 'editor-change');\n      if (typeof this.debounceTime === 'number') {\n        textChange$ = textChange$.pipe(debounceTime(this.debounceTime));\n        editorChange$ = editorChange$.pipe(debounceTime(this.debounceTime));\n      }\n      this.subscription.add(\n      // update model if text changes\n      textChange$.subscribe(([delta, oldDelta, source]) => {\n        this.textChangeHandler(delta, oldDelta, source);\n      }));\n      this.subscription.add(\n      // triggered if selection or text changed\n      editorChange$.subscribe(([event, current, old, source]) => {\n        this.editorChangeHandler(event, current, old, source);\n      }));\n    });\n  }\n  dispose() {\n    if (this.subscription !== null) {\n      this.subscription.unsubscribe();\n      this.subscription = null;\n    }\n  }\n  static #_ = this.ɵfac = function QuillEditorBase_Factory(t) {\n    return new (t || QuillEditorBase)();\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: QuillEditorBase,\n    inputs: {\n      format: \"format\",\n      theme: \"theme\",\n      modules: \"modules\",\n      debug: \"debug\",\n      readOnly: \"readOnly\",\n      placeholder: \"placeholder\",\n      maxLength: \"maxLength\",\n      minLength: \"minLength\",\n      required: \"required\",\n      formats: \"formats\",\n      customToolbarPosition: \"customToolbarPosition\",\n      sanitize: \"sanitize\",\n      beforeRender: \"beforeRender\",\n      styles: \"styles\",\n      strict: \"strict\",\n      scrollingContainer: \"scrollingContainer\",\n      bounds: \"bounds\",\n      customOptions: \"customOptions\",\n      customModules: \"customModules\",\n      trackChanges: \"trackChanges\",\n      preserveWhitespace: \"preserveWhitespace\",\n      classes: \"classes\",\n      trimOnValidation: \"trimOnValidation\",\n      linkPlaceholder: \"linkPlaceholder\",\n      compareValues: \"compareValues\",\n      filterNull: \"filterNull\",\n      debounceTime: \"debounceTime\",\n      defaultEmptyValue: \"defaultEmptyValue\",\n      valueGetter: \"valueGetter\",\n      valueSetter: \"valueSetter\"\n    },\n    outputs: {\n      onEditorCreated: \"onEditorCreated\",\n      onEditorChanged: \"onEditorChanged\",\n      onContentChanged: \"onContentChanged\",\n      onSelectionChanged: \"onSelectionChanged\",\n      onFocus: \"onFocus\",\n      onBlur: \"onBlur\",\n      onNativeFocus: \"onNativeFocus\",\n      onNativeBlur: \"onNativeBlur\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillEditorBase, [{\n    type: Directive\n  }], null, {\n    format: [{\n      type: Input\n    }],\n    theme: [{\n      type: Input\n    }],\n    modules: [{\n      type: Input\n    }],\n    debug: [{\n      type: Input\n    }],\n    readOnly: [{\n      type: Input\n    }],\n    placeholder: [{\n      type: Input\n    }],\n    maxLength: [{\n      type: Input\n    }],\n    minLength: [{\n      type: Input\n    }],\n    required: [{\n      type: Input\n    }],\n    formats: [{\n      type: Input\n    }],\n    customToolbarPosition: [{\n      type: Input\n    }],\n    sanitize: [{\n      type: Input\n    }],\n    beforeRender: [{\n      type: Input\n    }],\n    styles: [{\n      type: Input\n    }],\n    strict: [{\n      type: Input\n    }],\n    scrollingContainer: [{\n      type: Input\n    }],\n    bounds: [{\n      type: Input\n    }],\n    customOptions: [{\n      type: Input\n    }],\n    customModules: [{\n      type: Input\n    }],\n    trackChanges: [{\n      type: Input\n    }],\n    preserveWhitespace: [{\n      type: Input\n    }],\n    classes: [{\n      type: Input\n    }],\n    trimOnValidation: [{\n      type: Input\n    }],\n    linkPlaceholder: [{\n      type: Input\n    }],\n    compareValues: [{\n      type: Input\n    }],\n    filterNull: [{\n      type: Input\n    }],\n    debounceTime: [{\n      type: Input\n    }],\n    defaultEmptyValue: [{\n      type: Input\n    }],\n    onEditorCreated: [{\n      type: Output\n    }],\n    onEditorChanged: [{\n      type: Output\n    }],\n    onContentChanged: [{\n      type: Output\n    }],\n    onSelectionChanged: [{\n      type: Output\n    }],\n    onFocus: [{\n      type: Output\n    }],\n    onBlur: [{\n      type: Output\n    }],\n    onNativeFocus: [{\n      type: Output\n    }],\n    onNativeBlur: [{\n      type: Output\n    }],\n    valueGetter: [{\n      type: Input\n    }],\n    valueSetter: [{\n      type: Input\n    }]\n  });\n})();\nclass QuillEditorComponent extends QuillEditorBase {\n  static #_ = this.ɵfac = /* @__PURE__ */function () {\n    let ɵQuillEditorComponent_BaseFactory;\n    return function QuillEditorComponent_Factory(t) {\n      return (ɵQuillEditorComponent_BaseFactory || (ɵQuillEditorComponent_BaseFactory = i0.ɵɵgetInheritedFactory(QuillEditorComponent)))(t || QuillEditorComponent);\n    };\n  }();\n  static #_2 = this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: QuillEditorComponent,\n    selectors: [[\"quill-editor\"]],\n    standalone: true,\n    features: [i0.ɵɵProvidersFeature([{\n      multi: true,\n      provide: NG_VALUE_ACCESSOR,\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      useExisting: forwardRef(() => QuillEditorComponent)\n    }, {\n      multi: true,\n      provide: NG_VALIDATORS,\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      useExisting: forwardRef(() => QuillEditorComponent)\n    }]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n    ngContentSelectors: _c1,\n    decls: 5,\n    vars: 2,\n    consts: [[3, \"ngIf\"], [\"noPreserveTpl\", \"\"], [\"quill-editor-element\", \"\", 4, \"ngIf\", \"ngIfElse\"], [\"quill-editor-element\", \"\"]],\n    template: function QuillEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef(_c0);\n        i0.ɵɵtemplate(0, QuillEditorComponent_ng_template_0_Template, 1, 2, \"ng-template\", 0);\n        i0.ɵɵprojection(1);\n        i0.ɵɵtemplate(2, QuillEditorComponent_ng_template_2_Template, 1, 2, \"ng-template\", 0);\n        i0.ɵɵtemplate(3, QuillEditorComponent_ng_template_3_Template, 1, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.toolbarPosition !== \"top\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.toolbarPosition === \"top\");\n      }\n    },\n    dependencies: [CommonModule, i1.NgIf],\n    styles: [\"[_nghost-%COMP%]{display:inline-block}\"]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillEditorComponent, [{\n    type: Component,\n    args: [{\n      encapsulation: ViewEncapsulation.Emulated,\n      providers: [{\n        multi: true,\n        provide: NG_VALUE_ACCESSOR,\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        useExisting: forwardRef(() => QuillEditorComponent)\n      }, {\n        multi: true,\n        provide: NG_VALIDATORS,\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        useExisting: forwardRef(() => QuillEditorComponent)\n      }],\n      selector: 'quill-editor',\n      template: `\n    <ng-template [ngIf]=\"toolbarPosition !== 'top'\">\n      <pre quill-editor-element *ngIf=\"preserve; else noPreserveTpl\"></pre>\n    </ng-template>\n    <ng-content select=\"[quill-editor-toolbar]\"></ng-content>\n    <ng-template [ngIf]=\"toolbarPosition === 'top'\">\n      <pre quill-editor-element *ngIf=\"preserve; else noPreserveTpl\"></pre>\n    </ng-template>\n    <ng-template #noPreserveTpl>\n      <div quill-editor-element></div>\n    </ng-template>\n  `,\n      standalone: true,\n      imports: [CommonModule],\n      styles: [\":host{display:inline-block}\\n\"]\n    }]\n  }], null, null);\n})();\nclass QuillViewHTMLComponent {\n  constructor(sanitizer, service) {\n    this.sanitizer = sanitizer;\n    this.service = service;\n    this.content = '';\n    this.innerHTML = '';\n    this.themeClass = 'ql-snow';\n  }\n  ngOnChanges(changes) {\n    if (changes.theme) {\n      const theme = changes.theme.currentValue || (this.service.config.theme ? this.service.config.theme : 'snow');\n      this.themeClass = `ql-${theme} ngx-quill-view-html`;\n    } else if (!this.theme) {\n      const theme = this.service.config.theme ? this.service.config.theme : 'snow';\n      this.themeClass = `ql-${theme} ngx-quill-view-html`;\n    }\n    if (changes.content) {\n      const content = changes.content.currentValue;\n      const sanitize = [true, false].includes(this.sanitize) ? this.sanitize : this.service.config.sanitize || false;\n      this.innerHTML = sanitize ? content : this.sanitizer.bypassSecurityTrustHtml(content);\n    }\n  }\n  static #_ = this.ɵfac = function QuillViewHTMLComponent_Factory(t) {\n    return new (t || QuillViewHTMLComponent)(i0.ɵɵdirectiveInject(DomSanitizer), i0.ɵɵdirectiveInject(QuillService));\n  };\n  static #_2 = this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: QuillViewHTMLComponent,\n    selectors: [[\"quill-view-html\"]],\n    inputs: {\n      content: \"content\",\n      theme: \"theme\",\n      sanitize: \"sanitize\"\n    },\n    standalone: true,\n    features: [i0.ɵɵNgOnChangesFeature, i0.ɵɵStandaloneFeature],\n    decls: 2,\n    vars: 2,\n    consts: [[1, \"ql-container\", 3, \"ngClass\"], [1, \"ql-editor\", 3, \"innerHTML\"]],\n    template: function QuillViewHTMLComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", ctx.themeClass);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHTML\", ctx.innerHTML, i0.ɵɵsanitizeHtml);\n      }\n    },\n    dependencies: [CommonModule, i1.NgClass],\n    styles: [\".ql-container.ngx-quill-view-html{border:0}\\n\"],\n    encapsulation: 2\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillViewHTMLComponent, [{\n    type: Component,\n    args: [{\n      encapsulation: ViewEncapsulation.None,\n      selector: 'quill-view-html',\n      template: `\n  <div class=\"ql-container\" [ngClass]=\"themeClass\">\n    <div class=\"ql-editor\" [innerHTML]=\"innerHTML\">\n    </div>\n  </div>\n`,\n      standalone: true,\n      imports: [CommonModule],\n      styles: [\".ql-container.ngx-quill-view-html{border:0}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i2.DomSanitizer,\n      decorators: [{\n        type: Inject,\n        args: [DomSanitizer]\n      }]\n    }, {\n      type: QuillService\n    }];\n  }, {\n    content: [{\n      type: Input\n    }],\n    theme: [{\n      type: Input\n    }],\n    sanitize: [{\n      type: Input\n    }]\n  });\n})();\nclass QuillViewComponent {\n  constructor(elementRef, renderer, zone, service, domSanitizer, platformId) {\n    this.elementRef = elementRef;\n    this.renderer = renderer;\n    this.zone = zone;\n    this.service = service;\n    this.domSanitizer = domSanitizer;\n    this.platformId = platformId;\n    this.strict = true;\n    this.customModules = [];\n    this.customOptions = [];\n    this.preserveWhitespace = false;\n    this.onEditorCreated = new EventEmitter();\n    this.preserve = false;\n    this.quillSubscription = null;\n    this.valueSetter = (quillEditor, value) => {\n      const format = getFormat(this.format, this.service.config.format);\n      let content = value;\n      if (format === 'text') {\n        quillEditor.setText(content);\n      } else {\n        if (format === 'html') {\n          const sanitize = [true, false].includes(this.sanitize) ? this.sanitize : this.service.config.sanitize || false;\n          if (sanitize) {\n            value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n          }\n          content = quillEditor.clipboard.convert(value);\n        } else if (format === 'json') {\n          try {\n            content = JSON.parse(value);\n          } catch (e) {\n            content = [{\n              insert: value\n            }];\n          }\n        }\n        quillEditor.setContents(content);\n      }\n    };\n  }\n  ngOnInit() {\n    this.preserve = this.preserveWhitespace;\n  }\n  ngOnChanges(changes) {\n    if (!this.quillEditor) {\n      return;\n    }\n    if (changes.content) {\n      this.valueSetter(this.quillEditor, changes.content.currentValue);\n    }\n  }\n  ngAfterViewInit() {\n    if (isPlatformServer(this.platformId)) {\n      return;\n    }\n    this.quillSubscription = this.service.getQuill().pipe(mergeMap(Quill => {\n      const promises = [this.service.registerCustomModules(Quill, this.customModules)];\n      const beforeRender = this.beforeRender ?? this.service.config.beforeRender;\n      if (beforeRender) {\n        promises.push(beforeRender());\n      }\n      return Promise.all(promises).then(() => Quill);\n    })).subscribe(Quill => {\n      const modules = Object.assign({}, this.modules || this.service.config.modules);\n      modules.toolbar = false;\n      this.customOptions.forEach(customOption => {\n        const newCustomOption = Quill.import(customOption.import);\n        newCustomOption.whitelist = customOption.whitelist;\n        Quill.register(newCustomOption, true);\n      });\n      let debug = this.debug;\n      if (!debug && debug !== false && this.service.config.debug) {\n        debug = this.service.config.debug;\n      }\n      let formats = this.formats;\n      if (!formats && formats === undefined) {\n        formats = this.service.config.formats ? Object.assign({}, this.service.config.formats) : this.service.config.formats === null ? null : undefined;\n      }\n      const theme = this.theme || (this.service.config.theme ? this.service.config.theme : 'snow');\n      this.editorElem = this.elementRef.nativeElement.querySelector('[quill-view-element]');\n      this.zone.runOutsideAngular(() => {\n        this.quillEditor = new Quill(this.editorElem, {\n          debug: debug,\n          formats: formats,\n          modules,\n          readOnly: true,\n          strict: this.strict,\n          theme\n        });\n      });\n      this.renderer.addClass(this.editorElem, 'ngx-quill-view');\n      if (this.content) {\n        this.valueSetter(this.quillEditor, this.content);\n      }\n      // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n      // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n      if (!this.onEditorCreated.observers.length) {\n        return;\n      }\n      // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n      // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n      // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n      requestAnimationFrame(() => {\n        this.onEditorCreated.emit(this.quillEditor);\n        this.onEditorCreated.complete();\n      });\n    });\n  }\n  ngOnDestroy() {\n    this.quillSubscription?.unsubscribe();\n    this.quillSubscription = null;\n  }\n  static #_ = this.ɵfac = function QuillViewComponent_Factory(t) {\n    return new (t || QuillViewComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(QuillService), i0.ɵɵdirectiveInject(i2.DomSanitizer), i0.ɵɵdirectiveInject(PLATFORM_ID));\n  };\n  static #_2 = this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: QuillViewComponent,\n    selectors: [[\"quill-view\"]],\n    inputs: {\n      format: \"format\",\n      theme: \"theme\",\n      modules: \"modules\",\n      debug: \"debug\",\n      formats: \"formats\",\n      sanitize: \"sanitize\",\n      beforeRender: \"beforeRender\",\n      strict: \"strict\",\n      content: \"content\",\n      customModules: \"customModules\",\n      customOptions: \"customOptions\",\n      preserveWhitespace: \"preserveWhitespace\"\n    },\n    outputs: {\n      onEditorCreated: \"onEditorCreated\"\n    },\n    standalone: true,\n    features: [i0.ɵɵNgOnChangesFeature, i0.ɵɵStandaloneFeature],\n    decls: 2,\n    vars: 2,\n    consts: [[\"quill-view-element\", \"\", 4, \"ngIf\"], [\"quill-view-element\", \"\"]],\n    template: function QuillViewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, QuillViewComponent_div_0_Template, 1, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, QuillViewComponent_pre_1_Template, 1, 0, \"pre\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.preserve);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.preserve);\n      }\n    },\n    dependencies: [CommonModule, i1.NgIf],\n    styles: [\".ql-container.ngx-quill-view{border:0}\\n\"],\n    encapsulation: 2\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillViewComponent, [{\n    type: Component,\n    args: [{\n      encapsulation: ViewEncapsulation.None,\n      selector: 'quill-view',\n      template: `\n<div quill-view-element *ngIf=\"!preserve\"></div>\n<pre quill-view-element *ngIf=\"preserve\"></pre>\n`,\n      standalone: true,\n      imports: [CommonModule],\n      styles: [\".ql-container.ngx-quill-view{border:0}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i0.NgZone\n    }, {\n      type: QuillService\n    }, {\n      type: i2.DomSanitizer\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, {\n    format: [{\n      type: Input\n    }],\n    theme: [{\n      type: Input\n    }],\n    modules: [{\n      type: Input\n    }],\n    debug: [{\n      type: Input\n    }],\n    formats: [{\n      type: Input\n    }],\n    sanitize: [{\n      type: Input\n    }],\n    beforeRender: [{\n      type: Input\n    }],\n    strict: [{\n      type: Input\n    }],\n    content: [{\n      type: Input\n    }],\n    customModules: [{\n      type: Input\n    }],\n    customOptions: [{\n      type: Input\n    }],\n    preserveWhitespace: [{\n      type: Input\n    }],\n    onEditorCreated: [{\n      type: Output\n    }]\n  });\n})();\nclass QuillModule {\n  static forRoot(config) {\n    return {\n      ngModule: QuillModule,\n      providers: [{\n        provide: QUILL_CONFIG_TOKEN,\n        useValue: config\n      }]\n    };\n  }\n  static #_ = this.ɵfac = function QuillModule_Factory(t) {\n    return new (t || QuillModule)();\n  };\n  static #_2 = this.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: QuillModule\n  });\n  static #_3 = this.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillModule, [{\n    type: NgModule,\n    args: [{\n      imports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent],\n      exports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent]\n    }]\n  }], null, null);\n})();\n\n/*\n * Public API Surface of ngx-quill\n */\n// Re-export everything from the secondary entry-point so we can be backwards-compatible\n// and don't introduce breaking changes for consumers.\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { QuillEditorBase, QuillEditorComponent, QuillModule, QuillService, QuillViewComponent, QuillViewHTMLComponent };","map":{"version":3,"names":["defaultModules","QUILL_CONFIG_TOKEN","i0","Injectable","Optional","Inject","EventEmitter","inject","ElementRef","ChangeDetectorRef","PLATFORM_ID","Renderer2","NgZone","SecurityContext","Directive","Input","Output","forwardRef","Component","ViewEncapsulation","NgModule","i1","DOCUMENT","isPlatformServer","CommonModule","i2","DomSanitizer","defer","isObservable","firstValueFrom","Subscription","fromEvent","shareReplay","mergeMap","debounceTime","NG_VALUE_ACCESSOR","NG_VALIDATORS","QuillEditorComponent_ng_template_0_pre_0_Template","rf","ctx","ɵɵelement","QuillEditorComponent_ng_template_0_Template","ɵɵtemplate","ctx_r0","ɵɵnextContext","_r2","ɵɵreference","ɵɵproperty","preserve","QuillEditorComponent_ng_template_2_pre_0_Template","QuillEditorComponent_ng_template_2_Template","ctx_r1","QuillEditorComponent_ng_template_3_Template","_c0","_c1","QuillViewComponent_div_0_Template","QuillViewComponent_pre_1_Template","getFormat","format","configFormat","passedFormat","QuillService","constructor","injector","config","_this","quill$","_asyncToGenerator","Quill","maybePatchedAddEventListener","document","addEventListener","quillImport","default","customOptions","forEach","customOption","newCustomOption","import","whitelist","register","suppressGlobalRegisterWarning","registerCustomModules","customModules","pipe","bufferSize","refCount","get","modules","getQuill","Array","isArray","implementation","path","_","ɵfac","QuillService_Factory","t","ɵɵinject","Injector","_2","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","ngDevMode","ɵsetClassMetadata","type","args","undefined","decorators","QuillEditorBase","required","customToolbarPosition","styles","strict","preserveWhitespace","trimOnValidation","compareValues","filterNull","defaultEmptyValue","onEditorCreated","onEditorChanged","onContentChanged","onSelectionChanged","onFocus","onBlur","onNativeFocus","onNativeBlur","disabled","toolbarPosition","subscription","quillSubscription","elementRef","cd","domSanitizer","platformId","renderer","zone","service","valueGetter","quillEditor","editorElement","html","querySelector","innerHTML","modelValue","getText","getContents","JSON","stringify","e","valueSetter","value","sanitize","includes","HTML","clipboard","convert","parse","insert","selectionChangeHandler","range","oldRange","source","shouldTriggerOnModelTouched","onModelTouched","observed","run","emit","editor","markForCheck","textChangeHandler","delta","oldDelta","text","content","editorElem","trackChanges","shouldTriggerOnModelChange","onModelChange","editorChangeHandler","event","current","old","normalizeClassNames","classes","classList","trim","split","reduce","prev","cur","trimmed","push","ngOnInit","ngAfterViewInit","promises","beforeRender","Promise","all","then","subscribe","nativeElement","toolbarElem","Object","assign","toolbar","placeholder","keys","key","setStyle","addClasses","bounds","body","debug","readOnly","hasOwnProperty","scrollingContainer","formats","runOutsideAngular","theme","scroll","domNode","next","getModule","container","preventDefault","linkPlaceholder","tooltip","input","root","dataset","link","setText","newValue","setContents","clear","setDisabledState","addQuillEventListeners","onValidatorChanged","requestAnimationFrame","complete","ngOnDestroy","dispose","unsubscribe","ngOnChanges","changes","enable","currentValue","currentStyling","previousStyling","previousValue","removeStyle","currentClasses","previousClasses","removeClasses","c","addClass","removeClass","writeValue","currentEditorValue","isDisabled","disable","setAttribute","removeAttribute","registerOnChange","fn","registerOnTouched","registerOnValidatorChange","validate","err","valid","textLength","length","deltaOperations","ops","onlyEmptyOperation","minLength","minLengthError","given","maxLength","maxLengthError","requiredError","empty","add","textChange$","editorChange$","QuillEditorBase_Factory","ɵdir","ɵɵdefineDirective","inputs","outputs","features","ɵɵNgOnChangesFeature","QuillEditorComponent","ɵQuillEditorComponent_BaseFactory","QuillEditorComponent_Factory","ɵɵgetInheritedFactory","ɵcmp","ɵɵdefineComponent","selectors","standalone","ɵɵProvidersFeature","multi","provide","useExisting","ɵɵInheritDefinitionFeature","ɵɵStandaloneFeature","ngContentSelectors","decls","vars","consts","template","QuillEditorComponent_Template","ɵɵprojectionDef","ɵɵprojection","ɵɵtemplateRefExtractor","ɵɵadvance","dependencies","NgIf","encapsulation","Emulated","providers","selector","imports","QuillViewHTMLComponent","sanitizer","themeClass","bypassSecurityTrustHtml","QuillViewHTMLComponent_Factory","ɵɵdirectiveInject","QuillViewHTMLComponent_Template","ɵɵelementStart","ɵɵelementEnd","ɵɵsanitizeHtml","NgClass","None","QuillViewComponent","observers","QuillViewComponent_Factory","QuillViewComponent_Template","QuillModule","forRoot","ngModule","useValue","QuillModule_Factory","ɵmod","ɵɵdefineNgModule","_3","ɵinj","ɵɵdefineInjector","exports"],"sources":["D:/PFE/API/application/virtual-Iteam/node_modules/ngx-quill/fesm2022/ngx-quill.mjs"],"sourcesContent":["import { defaultModules, QUILL_CONFIG_TOKEN } from 'ngx-quill/config';\nexport * from 'ngx-quill/config';\nimport * as i0 from '@angular/core';\nimport { Injectable, Optional, Inject, EventEmitter, inject, ElementRef, ChangeDetectorRef, PLATFORM_ID, Renderer2, NgZone, SecurityContext, Directive, Input, Output, forwardRef, Component, ViewEncapsulation, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT, isPlatformServer, CommonModule } from '@angular/common';\nimport * as i2 from '@angular/platform-browser';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { defer, isObservable, firstValueFrom, Subscription, fromEvent } from 'rxjs';\nimport { shareReplay, mergeMap, debounceTime } from 'rxjs/operators';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\n\nconst getFormat = (format, configFormat) => {\n    const passedFormat = format || configFormat;\n    return passedFormat || 'html';\n};\n\nclass QuillService {\n    constructor(injector, config) {\n        this.config = config;\n        this.quill$ = defer(async () => {\n            if (!this.Quill) {\n                // Quill adds events listeners on import https://github.com/quilljs/quill/blob/develop/core/emitter.js#L8\n                // We'd want to use the unpatched `addEventListener` method to have all event callbacks to be run outside of zone.\n                // We don't know yet if the `zone.js` is used or not, just save the value to restore it back further.\n                const maybePatchedAddEventListener = this.document.addEventListener;\n                // There're 2 types of Angular applications:\n                // 1) zone-full (by default)\n                // 2) zone-less\n                // The developer can avoid importing the `zone.js` package and tells Angular that he/she is responsible for running\n                // the change detection by himself. This is done by \"nooping\" the zone through `CompilerOptions` when bootstrapping\n                // the root module. We fallback to `document.addEventListener` if `__zone_symbol__addEventListener` is not defined,\n                // this means the `zone.js` is not imported.\n                // The `__zone_symbol__addEventListener` is basically a native DOM API, which is not patched by zone.js, thus not even going\n                // through the `zone.js` task lifecycle. You can also access the native DOM API as follows `target[Zone.__symbol__('methodName')]`.\n                this.document.addEventListener =\n                    // eslint-disable-next-line @typescript-eslint/dot-notation\n                    this.document['__zone_symbol__addEventListener'] ||\n                        this.document.addEventListener;\n                const quillImport = await import(/* webpackChunkName: 'quill' */ 'quill');\n                this.document.addEventListener = maybePatchedAddEventListener;\n                this.Quill = (quillImport.default ? quillImport.default : quillImport);\n            }\n            // Only register custom options and modules once\n            this.config.customOptions?.forEach((customOption) => {\n                const newCustomOption = this.Quill.import(customOption.import);\n                newCustomOption.whitelist = customOption.whitelist;\n                this.Quill.register(newCustomOption, true, this.config.suppressGlobalRegisterWarning);\n            });\n            return await this.registerCustomModules(this.Quill, this.config.customModules, this.config.suppressGlobalRegisterWarning);\n        }).pipe(shareReplay({ bufferSize: 1, refCount: true }));\n        this.document = injector.get(DOCUMENT);\n        if (!this.config) {\n            this.config = { modules: defaultModules };\n        }\n    }\n    getQuill() {\n        return this.quill$;\n    }\n    /**\n     * Marked as internal so it won't be available for `ngx-quill` consumers, this is only\n     * internal method to be used within the library.\n     *\n     * @internal\n     */\n    async registerCustomModules(Quill, customModules, suppressGlobalRegisterWarning) {\n        if (Array.isArray(customModules)) {\n            // eslint-disable-next-line prefer-const\n            for (let { implementation, path } of customModules) {\n                // The `implementation` might be an observable that resolves the actual implementation,\n                // e.g. if it should be lazy loaded.\n                if (isObservable(implementation)) {\n                    implementation = await firstValueFrom(implementation);\n                }\n                Quill.register(path, implementation, suppressGlobalRegisterWarning);\n            }\n        }\n        // Return `Quill` constructor so we'll be able to re-use its return value except of using\n        // `map` operators, etc.\n        return Quill;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillService, deps: [{ token: i0.Injector }, { token: QUILL_CONFIG_TOKEN, optional: true }], target: i0.ɵɵFactoryTarget.Injectable }); }\n    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillService, providedIn: 'root' }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [QUILL_CONFIG_TOKEN]\n                }] }]; } });\n\nclass QuillEditorBase {\n    constructor() {\n        this.required = false;\n        this.customToolbarPosition = 'top';\n        this.styles = null;\n        this.strict = true;\n        this.customOptions = [];\n        this.customModules = [];\n        this.preserveWhitespace = false;\n        this.trimOnValidation = false;\n        this.compareValues = false;\n        this.filterNull = false;\n        /*\n        https://github.com/KillerCodeMonkey/ngx-quill/issues/1257 - fix null value set\n      \n        provide default empty value\n        by default null\n      \n        e.g. defaultEmptyValue=\"\" - empty string\n      \n        <quill-editor\n          defaultEmptyValue=\"\"\n          formControlName=\"message\"\n        ></quill-editor>\n        */\n        this.defaultEmptyValue = null;\n        this.onEditorCreated = new EventEmitter();\n        this.onEditorChanged = new EventEmitter();\n        this.onContentChanged = new EventEmitter();\n        this.onSelectionChanged = new EventEmitter();\n        this.onFocus = new EventEmitter();\n        this.onBlur = new EventEmitter();\n        this.onNativeFocus = new EventEmitter();\n        this.onNativeBlur = new EventEmitter();\n        this.disabled = false; // used to store initial value before ViewInit\n        this.preserve = false;\n        this.toolbarPosition = 'top';\n        this.subscription = null;\n        this.quillSubscription = null;\n        this.elementRef = inject(ElementRef);\n        this.document = inject(DOCUMENT);\n        this.cd = inject(ChangeDetectorRef);\n        this.domSanitizer = inject(DomSanitizer);\n        this.platformId = inject(PLATFORM_ID);\n        this.renderer = inject(Renderer2);\n        this.zone = inject(NgZone);\n        this.service = inject(QuillService);\n        this.valueGetter = (quillEditor, editorElement) => {\n            let html = editorElement.querySelector('.ql-editor').innerHTML;\n            if (html === '<p><br></p>' || html === '<div><br></div>') {\n                html = this.defaultEmptyValue;\n            }\n            let modelValue = html;\n            const format = getFormat(this.format, this.service.config.format);\n            if (format === 'text') {\n                modelValue = quillEditor.getText();\n            }\n            else if (format === 'object') {\n                modelValue = quillEditor.getContents();\n            }\n            else if (format === 'json') {\n                try {\n                    modelValue = JSON.stringify(quillEditor.getContents());\n                }\n                catch (e) {\n                    modelValue = quillEditor.getText();\n                }\n            }\n            return modelValue;\n        };\n        this.valueSetter = (quillEditor, value) => {\n            const format = getFormat(this.format, this.service.config.format);\n            if (format === 'html') {\n                const sanitize = [true, false].includes(this.sanitize) ? this.sanitize : (this.service.config.sanitize || false);\n                if (sanitize) {\n                    value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n                }\n                return quillEditor.clipboard.convert(value);\n            }\n            else if (format === 'json') {\n                try {\n                    return JSON.parse(value);\n                }\n                catch (e) {\n                    return [{ insert: value }];\n                }\n            }\n            return value;\n        };\n        this.selectionChangeHandler = (range, oldRange, source) => {\n            const shouldTriggerOnModelTouched = !range && !!this.onModelTouched;\n            // only emit changes when there's any listener\n            if (!this.onBlur.observed &&\n                !this.onFocus.observed &&\n                !this.onSelectionChanged.observed &&\n                !shouldTriggerOnModelTouched) {\n                return;\n            }\n            this.zone.run(() => {\n                if (range === null) {\n                    this.onBlur.emit({\n                        editor: this.quillEditor,\n                        source\n                    });\n                }\n                else if (oldRange === null) {\n                    this.onFocus.emit({\n                        editor: this.quillEditor,\n                        source\n                    });\n                }\n                this.onSelectionChanged.emit({\n                    editor: this.quillEditor,\n                    oldRange,\n                    range,\n                    source\n                });\n                if (shouldTriggerOnModelTouched) {\n                    this.onModelTouched();\n                }\n                this.cd.markForCheck();\n            });\n        };\n        this.textChangeHandler = (delta, oldDelta, source) => {\n            // only emit changes emitted by user interactions\n            const text = this.quillEditor.getText();\n            const content = this.quillEditor.getContents();\n            let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n            if (html === '<p><br></p>' || html === '<div><br></div>') {\n                html = this.defaultEmptyValue;\n            }\n            const trackChanges = this.trackChanges || this.service.config.trackChanges;\n            const shouldTriggerOnModelChange = (source === 'user' || trackChanges && trackChanges === 'all') && !!this.onModelChange;\n            // only emit changes when there's any listener\n            if (!this.onContentChanged.observed && !shouldTriggerOnModelChange) {\n                return;\n            }\n            this.zone.run(() => {\n                if (shouldTriggerOnModelChange) {\n                    this.onModelChange(this.valueGetter(this.quillEditor, this.editorElem));\n                }\n                this.onContentChanged.emit({\n                    content,\n                    delta,\n                    editor: this.quillEditor,\n                    html,\n                    oldDelta,\n                    source,\n                    text\n                });\n                this.cd.markForCheck();\n            });\n        };\n        // eslint-disable-next-line max-len\n        this.editorChangeHandler = (event, current, old, source) => {\n            // only emit changes when there's any listener\n            if (!this.onEditorChanged.observed) {\n                return;\n            }\n            // only emit changes emitted by user interactions\n            if (event === 'text-change') {\n                const text = this.quillEditor.getText();\n                const content = this.quillEditor.getContents();\n                let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n                if (html === '<p><br></p>' || html === '<div><br></div>') {\n                    html = this.defaultEmptyValue;\n                }\n                this.zone.run(() => {\n                    this.onEditorChanged.emit({\n                        content,\n                        delta: current,\n                        editor: this.quillEditor,\n                        event,\n                        html,\n                        oldDelta: old,\n                        source,\n                        text\n                    });\n                    this.cd.markForCheck();\n                });\n            }\n            else {\n                this.zone.run(() => {\n                    this.onEditorChanged.emit({\n                        editor: this.quillEditor,\n                        event,\n                        oldRange: old,\n                        range: current,\n                        source\n                    });\n                    this.cd.markForCheck();\n                });\n            }\n        };\n    }\n    static normalizeClassNames(classes) {\n        const classList = classes.trim().split(' ');\n        return classList.reduce((prev, cur) => {\n            const trimmed = cur.trim();\n            if (trimmed) {\n                prev.push(trimmed);\n            }\n            return prev;\n        }, []);\n    }\n    ngOnInit() {\n        this.preserve = this.preserveWhitespace;\n        this.toolbarPosition = this.customToolbarPosition;\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platformId)) {\n            return;\n        }\n        // The `quill-editor` component might be destroyed before the `quill` chunk is loaded and its code is executed\n        // this will lead to runtime exceptions, since the code will be executed on DOM nodes that don't exist within the tree.\n        this.quillSubscription = this.service.getQuill().pipe(mergeMap((Quill) => {\n            const promises = [this.service.registerCustomModules(Quill, this.customModules)];\n            const beforeRender = this.beforeRender ?? this.service.config.beforeRender;\n            if (beforeRender) {\n                promises.push(beforeRender());\n            }\n            return Promise.all(promises).then(() => Quill);\n        })).subscribe(Quill => {\n            this.editorElem = this.elementRef.nativeElement.querySelector('[quill-editor-element]');\n            const toolbarElem = this.elementRef.nativeElement.querySelector('[quill-editor-toolbar]');\n            const modules = Object.assign({}, this.modules || this.service.config.modules);\n            if (toolbarElem) {\n                modules.toolbar = toolbarElem;\n            }\n            else if (modules.toolbar === undefined) {\n                modules.toolbar = defaultModules.toolbar;\n            }\n            let placeholder = this.placeholder !== undefined ? this.placeholder : this.service.config.placeholder;\n            if (placeholder === undefined) {\n                placeholder = 'Insert text here ...';\n            }\n            if (this.styles) {\n                Object.keys(this.styles).forEach((key) => {\n                    this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n                });\n            }\n            if (this.classes) {\n                this.addClasses(this.classes);\n            }\n            this.customOptions.forEach((customOption) => {\n                const newCustomOption = Quill.import(customOption.import);\n                newCustomOption.whitelist = customOption.whitelist;\n                Quill.register(newCustomOption, true);\n            });\n            let bounds = this.bounds && this.bounds === 'self' ? this.editorElem : this.bounds;\n            if (!bounds) {\n                bounds = this.service.config.bounds ? this.service.config.bounds : this.document.body;\n            }\n            let debug = this.debug;\n            if (!debug && debug !== false && this.service.config.debug) {\n                debug = this.service.config.debug;\n            }\n            let readOnly = this.readOnly;\n            if (!readOnly && this.readOnly !== false) {\n                readOnly = this.service.config.readOnly !== undefined ? this.service.config.readOnly : false;\n            }\n            let defaultEmptyValue = this.defaultEmptyValue;\n            // eslint-disable-next-line no-prototype-builtins\n            if (this.service.config.hasOwnProperty('defaultEmptyValue')) {\n                defaultEmptyValue = this.service.config.defaultEmptyValue;\n            }\n            let scrollingContainer = this.scrollingContainer;\n            if (!scrollingContainer && this.scrollingContainer !== null) {\n                scrollingContainer =\n                    this.service.config.scrollingContainer === null\n                        || this.service.config.scrollingContainer ? this.service.config.scrollingContainer : null;\n            }\n            let formats = this.formats;\n            if (!formats && formats === undefined) {\n                formats = this.service.config.formats ? [...this.service.config.formats] : (this.service.config.formats === null ? null : undefined);\n            }\n            this.zone.runOutsideAngular(() => {\n                this.quillEditor = new Quill(this.editorElem, {\n                    bounds,\n                    debug: debug,\n                    formats: formats,\n                    modules,\n                    placeholder,\n                    readOnly,\n                    defaultEmptyValue,\n                    scrollingContainer: scrollingContainer,\n                    strict: this.strict,\n                    theme: this.theme || (this.service.config.theme ? this.service.config.theme : 'snow')\n                });\n                if (this.onNativeBlur.observed) {\n                    // https://github.com/quilljs/quill/issues/2186#issuecomment-533401328\n                    this.quillEditor.scroll.domNode.addEventListener('blur', () => this.onNativeBlur.next({\n                        editor: this.quillEditor,\n                        source: 'dom'\n                    }));\n                    // https://github.com/quilljs/quill/issues/2186#issuecomment-803257538\n                    this.quillEditor.getModule('toolbar').container.addEventListener('mousedown', (e) => e.preventDefault());\n                }\n                if (this.onNativeFocus.observed) {\n                    this.quillEditor.scroll.domNode.addEventListener('focus', () => this.onNativeFocus.next({\n                        editor: this.quillEditor,\n                        source: 'dom'\n                    }));\n                }\n                // Set optional link placeholder, Quill has no native API for it so using workaround\n                if (this.linkPlaceholder) {\n                    const tooltip = this.quillEditor?.theme?.tooltip;\n                    const input = tooltip?.root?.querySelector('input[data-link]');\n                    if (input?.dataset) {\n                        input.dataset.link = this.linkPlaceholder;\n                    }\n                }\n            });\n            if (this.content) {\n                const format = getFormat(this.format, this.service.config.format);\n                if (format === 'text') {\n                    this.quillEditor.setText(this.content, 'silent');\n                }\n                else {\n                    const newValue = this.valueSetter(this.quillEditor, this.content);\n                    this.quillEditor.setContents(newValue, 'silent');\n                }\n                this.quillEditor.getModule('history').clear();\n            }\n            // initialize disabled status based on this.disabled as default value\n            this.setDisabledState();\n            this.addQuillEventListeners();\n            // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n            // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n            if (!this.onEditorCreated.observed && !this.onValidatorChanged) {\n                return;\n            }\n            // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n            // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n            // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n            requestAnimationFrame(() => {\n                if (this.onValidatorChanged) {\n                    this.onValidatorChanged();\n                }\n                this.onEditorCreated.emit(this.quillEditor);\n                this.onEditorCreated.complete();\n            });\n        });\n    }\n    ngOnDestroy() {\n        this.dispose();\n        this.quillSubscription?.unsubscribe();\n        this.quillSubscription = null;\n    }\n    ngOnChanges(changes) {\n        if (!this.quillEditor) {\n            return;\n        }\n        /* eslint-disable @typescript-eslint/dot-notation */\n        if (changes.readOnly) {\n            this.quillEditor.enable(!changes.readOnly.currentValue);\n        }\n        if (changes.placeholder) {\n            this.quillEditor.root.dataset.placeholder =\n                changes.placeholder.currentValue;\n        }\n        if (changes.defaultEmptyValue) {\n            this.quillEditor.root.dataset.defaultEmptyValue =\n                changes.defaultEmptyValue.currentValue;\n        }\n        if (changes.styles) {\n            const currentStyling = changes.styles.currentValue;\n            const previousStyling = changes.styles.previousValue;\n            if (previousStyling) {\n                Object.keys(previousStyling).forEach((key) => {\n                    this.renderer.removeStyle(this.editorElem, key);\n                });\n            }\n            if (currentStyling) {\n                Object.keys(currentStyling).forEach((key) => {\n                    this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n                });\n            }\n        }\n        if (changes.classes) {\n            const currentClasses = changes.classes.currentValue;\n            const previousClasses = changes.classes.previousValue;\n            if (previousClasses) {\n                this.removeClasses(previousClasses);\n            }\n            if (currentClasses) {\n                this.addClasses(currentClasses);\n            }\n        }\n        // We'd want to re-apply event listeners if the `debounceTime` binding changes to apply the\n        // `debounceTime` operator or vice-versa remove it.\n        if (changes.debounceTime) {\n            this.addQuillEventListeners();\n        }\n        /* eslint-enable @typescript-eslint/dot-notation */\n    }\n    addClasses(classList) {\n        QuillEditorBase.normalizeClassNames(classList).forEach((c) => {\n            this.renderer.addClass(this.editorElem, c);\n        });\n    }\n    removeClasses(classList) {\n        QuillEditorBase.normalizeClassNames(classList).forEach((c) => {\n            this.renderer.removeClass(this.editorElem, c);\n        });\n    }\n    writeValue(currentValue) {\n        // optional fix for https://github.com/angular/angular/issues/14988\n        if (this.filterNull && currentValue === null) {\n            return;\n        }\n        this.content = currentValue;\n        if (!this.quillEditor) {\n            return;\n        }\n        const format = getFormat(this.format, this.service.config.format);\n        const newValue = this.valueSetter(this.quillEditor, currentValue);\n        if (this.compareValues) {\n            const currentEditorValue = this.quillEditor.getContents();\n            if (JSON.stringify(currentEditorValue) === JSON.stringify(newValue)) {\n                return;\n            }\n        }\n        if (currentValue) {\n            if (format === 'text') {\n                this.quillEditor.setText(currentValue);\n            }\n            else {\n                this.quillEditor.setContents(newValue);\n            }\n            return;\n        }\n        this.quillEditor.setText('');\n    }\n    setDisabledState(isDisabled = this.disabled) {\n        // store initial value to set appropriate disabled status after ViewInit\n        this.disabled = isDisabled;\n        if (this.quillEditor) {\n            if (isDisabled) {\n                this.quillEditor.disable();\n                this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'disabled');\n            }\n            else {\n                if (!this.readOnly) {\n                    this.quillEditor.enable();\n                }\n                this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\n            }\n        }\n    }\n    registerOnChange(fn) {\n        this.onModelChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onModelTouched = fn;\n    }\n    registerOnValidatorChange(fn) {\n        this.onValidatorChanged = fn;\n    }\n    validate() {\n        if (!this.quillEditor) {\n            return null;\n        }\n        const err = {};\n        let valid = true;\n        const text = this.quillEditor.getText();\n        // trim text if wanted + handle special case that an empty editor contains a new line\n        const textLength = this.trimOnValidation ? text.trim().length : (text.length === 1 && text.trim().length === 0 ? 0 : text.length - 1);\n        const deltaOperations = this.quillEditor.getContents().ops;\n        const onlyEmptyOperation = deltaOperations && deltaOperations.length === 1 && ['\\n', ''].includes(deltaOperations[0].insert);\n        if (this.minLength && textLength && textLength < this.minLength) {\n            err.minLengthError = {\n                given: textLength,\n                minLength: this.minLength\n            };\n            valid = false;\n        }\n        if (this.maxLength && textLength > this.maxLength) {\n            err.maxLengthError = {\n                given: textLength,\n                maxLength: this.maxLength\n            };\n            valid = false;\n        }\n        if (this.required && !textLength && onlyEmptyOperation) {\n            err.requiredError = {\n                empty: true\n            };\n            valid = false;\n        }\n        return valid ? null : err;\n    }\n    addQuillEventListeners() {\n        this.dispose();\n        // We have to enter the `<root>` zone when adding event listeners, so `debounceTime` will spawn the\n        // `AsyncAction` there w/o triggering change detections. We still re-enter the Angular's zone through\n        // `zone.run` when we emit an event to the parent component.\n        this.zone.runOutsideAngular(() => {\n            this.subscription = new Subscription();\n            this.subscription.add(\n            // mark model as touched if editor lost focus\n            fromEvent(this.quillEditor, 'selection-change').subscribe(([range, oldRange, source]) => {\n                this.selectionChangeHandler(range, oldRange, source);\n            }));\n            // The `fromEvent` supports passing JQuery-style event targets, the editor has `on` and `off` methods which\n            // will be invoked upon subscription and teardown.\n            let textChange$ = fromEvent(this.quillEditor, 'text-change');\n            let editorChange$ = fromEvent(this.quillEditor, 'editor-change');\n            if (typeof this.debounceTime === 'number') {\n                textChange$ = textChange$.pipe(debounceTime(this.debounceTime));\n                editorChange$ = editorChange$.pipe(debounceTime(this.debounceTime));\n            }\n            this.subscription.add(\n            // update model if text changes\n            textChange$.subscribe(([delta, oldDelta, source]) => {\n                this.textChangeHandler(delta, oldDelta, source);\n            }));\n            this.subscription.add(\n            // triggered if selection or text changed\n            editorChange$.subscribe(([event, current, old, source]) => {\n                this.editorChangeHandler(event, current, old, source);\n            }));\n        });\n    }\n    dispose() {\n        if (this.subscription !== null) {\n            this.subscription.unsubscribe();\n            this.subscription = null;\n        }\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillEditorBase, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.5\", type: QuillEditorBase, inputs: { format: \"format\", theme: \"theme\", modules: \"modules\", debug: \"debug\", readOnly: \"readOnly\", placeholder: \"placeholder\", maxLength: \"maxLength\", minLength: \"minLength\", required: \"required\", formats: \"formats\", customToolbarPosition: \"customToolbarPosition\", sanitize: \"sanitize\", beforeRender: \"beforeRender\", styles: \"styles\", strict: \"strict\", scrollingContainer: \"scrollingContainer\", bounds: \"bounds\", customOptions: \"customOptions\", customModules: \"customModules\", trackChanges: \"trackChanges\", preserveWhitespace: \"preserveWhitespace\", classes: \"classes\", trimOnValidation: \"trimOnValidation\", linkPlaceholder: \"linkPlaceholder\", compareValues: \"compareValues\", filterNull: \"filterNull\", debounceTime: \"debounceTime\", defaultEmptyValue: \"defaultEmptyValue\", valueGetter: \"valueGetter\", valueSetter: \"valueSetter\" }, outputs: { onEditorCreated: \"onEditorCreated\", onEditorChanged: \"onEditorChanged\", onContentChanged: \"onContentChanged\", onSelectionChanged: \"onSelectionChanged\", onFocus: \"onFocus\", onBlur: \"onBlur\", onNativeFocus: \"onNativeFocus\", onNativeBlur: \"onNativeBlur\" }, usesOnChanges: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillEditorBase, decorators: [{\n            type: Directive\n        }], propDecorators: { format: [{\n                type: Input\n            }], theme: [{\n                type: Input\n            }], modules: [{\n                type: Input\n            }], debug: [{\n                type: Input\n            }], readOnly: [{\n                type: Input\n            }], placeholder: [{\n                type: Input\n            }], maxLength: [{\n                type: Input\n            }], minLength: [{\n                type: Input\n            }], required: [{\n                type: Input\n            }], formats: [{\n                type: Input\n            }], customToolbarPosition: [{\n                type: Input\n            }], sanitize: [{\n                type: Input\n            }], beforeRender: [{\n                type: Input\n            }], styles: [{\n                type: Input\n            }], strict: [{\n                type: Input\n            }], scrollingContainer: [{\n                type: Input\n            }], bounds: [{\n                type: Input\n            }], customOptions: [{\n                type: Input\n            }], customModules: [{\n                type: Input\n            }], trackChanges: [{\n                type: Input\n            }], preserveWhitespace: [{\n                type: Input\n            }], classes: [{\n                type: Input\n            }], trimOnValidation: [{\n                type: Input\n            }], linkPlaceholder: [{\n                type: Input\n            }], compareValues: [{\n                type: Input\n            }], filterNull: [{\n                type: Input\n            }], debounceTime: [{\n                type: Input\n            }], defaultEmptyValue: [{\n                type: Input\n            }], onEditorCreated: [{\n                type: Output\n            }], onEditorChanged: [{\n                type: Output\n            }], onContentChanged: [{\n                type: Output\n            }], onSelectionChanged: [{\n                type: Output\n            }], onFocus: [{\n                type: Output\n            }], onBlur: [{\n                type: Output\n            }], onNativeFocus: [{\n                type: Output\n            }], onNativeBlur: [{\n                type: Output\n            }], valueGetter: [{\n                type: Input\n            }], valueSetter: [{\n                type: Input\n            }] } });\nclass QuillEditorComponent extends QuillEditorBase {\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillEditorComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.5\", type: QuillEditorComponent, isStandalone: true, selector: \"quill-editor\", providers: [\n            {\n                multi: true,\n                provide: NG_VALUE_ACCESSOR,\n                // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                useExisting: forwardRef(() => QuillEditorComponent)\n            },\n            {\n                multi: true,\n                provide: NG_VALIDATORS,\n                // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                useExisting: forwardRef(() => QuillEditorComponent)\n            }\n        ], usesInheritance: true, ngImport: i0, template: `\n    <ng-template [ngIf]=\"toolbarPosition !== 'top'\">\n      <pre quill-editor-element *ngIf=\"preserve; else noPreserveTpl\"></pre>\n    </ng-template>\n    <ng-content select=\"[quill-editor-toolbar]\"></ng-content>\n    <ng-template [ngIf]=\"toolbarPosition === 'top'\">\n      <pre quill-editor-element *ngIf=\"preserve; else noPreserveTpl\"></pre>\n    </ng-template>\n    <ng-template #noPreserveTpl>\n      <div quill-editor-element></div>\n    </ng-template>\n  `, isInline: true, styles: [\":host{display:inline-block}\\n\"], dependencies: [{ kind: \"ngmodule\", type: CommonModule }, { kind: \"directive\", type: i1.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillEditorComponent, decorators: [{\n            type: Component,\n            args: [{ encapsulation: ViewEncapsulation.Emulated, providers: [\n                        {\n                            multi: true,\n                            provide: NG_VALUE_ACCESSOR,\n                            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                            useExisting: forwardRef(() => QuillEditorComponent)\n                        },\n                        {\n                            multi: true,\n                            provide: NG_VALIDATORS,\n                            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                            useExisting: forwardRef(() => QuillEditorComponent)\n                        }\n                    ], selector: 'quill-editor', template: `\n    <ng-template [ngIf]=\"toolbarPosition !== 'top'\">\n      <pre quill-editor-element *ngIf=\"preserve; else noPreserveTpl\"></pre>\n    </ng-template>\n    <ng-content select=\"[quill-editor-toolbar]\"></ng-content>\n    <ng-template [ngIf]=\"toolbarPosition === 'top'\">\n      <pre quill-editor-element *ngIf=\"preserve; else noPreserveTpl\"></pre>\n    </ng-template>\n    <ng-template #noPreserveTpl>\n      <div quill-editor-element></div>\n    </ng-template>\n  `, standalone: true, imports: [CommonModule], styles: [\":host{display:inline-block}\\n\"] }]\n        }] });\n\nclass QuillViewHTMLComponent {\n    constructor(sanitizer, service) {\n        this.sanitizer = sanitizer;\n        this.service = service;\n        this.content = '';\n        this.innerHTML = '';\n        this.themeClass = 'ql-snow';\n    }\n    ngOnChanges(changes) {\n        if (changes.theme) {\n            const theme = changes.theme.currentValue || (this.service.config.theme ? this.service.config.theme : 'snow');\n            this.themeClass = `ql-${theme} ngx-quill-view-html`;\n        }\n        else if (!this.theme) {\n            const theme = this.service.config.theme ? this.service.config.theme : 'snow';\n            this.themeClass = `ql-${theme} ngx-quill-view-html`;\n        }\n        if (changes.content) {\n            const content = changes.content.currentValue;\n            const sanitize = [true, false].includes(this.sanitize) ? this.sanitize : (this.service.config.sanitize || false);\n            this.innerHTML = sanitize ? content : this.sanitizer.bypassSecurityTrustHtml(content);\n        }\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillViewHTMLComponent, deps: [{ token: DomSanitizer }, { token: QuillService }], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.5\", type: QuillViewHTMLComponent, isStandalone: true, selector: \"quill-view-html\", inputs: { content: \"content\", theme: \"theme\", sanitize: \"sanitize\" }, usesOnChanges: true, ngImport: i0, template: `\n  <div class=\"ql-container\" [ngClass]=\"themeClass\">\n    <div class=\"ql-editor\" [innerHTML]=\"innerHTML\">\n    </div>\n  </div>\n`, isInline: true, styles: [\".ql-container.ngx-quill-view-html{border:0}\\n\"], dependencies: [{ kind: \"ngmodule\", type: CommonModule }, { kind: \"directive\", type: i1.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }], encapsulation: i0.ViewEncapsulation.None }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillViewHTMLComponent, decorators: [{\n            type: Component,\n            args: [{ encapsulation: ViewEncapsulation.None, selector: 'quill-view-html', template: `\n  <div class=\"ql-container\" [ngClass]=\"themeClass\">\n    <div class=\"ql-editor\" [innerHTML]=\"innerHTML\">\n    </div>\n  </div>\n`, standalone: true, imports: [CommonModule], styles: [\".ql-container.ngx-quill-view-html{border:0}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i2.DomSanitizer, decorators: [{\n                    type: Inject,\n                    args: [DomSanitizer]\n                }] }, { type: QuillService }]; }, propDecorators: { content: [{\n                type: Input\n            }], theme: [{\n                type: Input\n            }], sanitize: [{\n                type: Input\n            }] } });\n\nclass QuillViewComponent {\n    constructor(elementRef, renderer, zone, service, domSanitizer, platformId) {\n        this.elementRef = elementRef;\n        this.renderer = renderer;\n        this.zone = zone;\n        this.service = service;\n        this.domSanitizer = domSanitizer;\n        this.platformId = platformId;\n        this.strict = true;\n        this.customModules = [];\n        this.customOptions = [];\n        this.preserveWhitespace = false;\n        this.onEditorCreated = new EventEmitter();\n        this.preserve = false;\n        this.quillSubscription = null;\n        this.valueSetter = (quillEditor, value) => {\n            const format = getFormat(this.format, this.service.config.format);\n            let content = value;\n            if (format === 'text') {\n                quillEditor.setText(content);\n            }\n            else {\n                if (format === 'html') {\n                    const sanitize = [true, false].includes(this.sanitize) ? this.sanitize : (this.service.config.sanitize || false);\n                    if (sanitize) {\n                        value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n                    }\n                    content = quillEditor.clipboard.convert(value);\n                }\n                else if (format === 'json') {\n                    try {\n                        content = JSON.parse(value);\n                    }\n                    catch (e) {\n                        content = [{ insert: value }];\n                    }\n                }\n                quillEditor.setContents(content);\n            }\n        };\n    }\n    ngOnInit() {\n        this.preserve = this.preserveWhitespace;\n    }\n    ngOnChanges(changes) {\n        if (!this.quillEditor) {\n            return;\n        }\n        if (changes.content) {\n            this.valueSetter(this.quillEditor, changes.content.currentValue);\n        }\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platformId)) {\n            return;\n        }\n        this.quillSubscription = this.service.getQuill().pipe(mergeMap((Quill) => {\n            const promises = [this.service.registerCustomModules(Quill, this.customModules)];\n            const beforeRender = this.beforeRender ?? this.service.config.beforeRender;\n            if (beforeRender) {\n                promises.push(beforeRender());\n            }\n            return Promise.all(promises).then(() => Quill);\n        })).subscribe(Quill => {\n            const modules = Object.assign({}, this.modules || this.service.config.modules);\n            modules.toolbar = false;\n            this.customOptions.forEach((customOption) => {\n                const newCustomOption = Quill.import(customOption.import);\n                newCustomOption.whitelist = customOption.whitelist;\n                Quill.register(newCustomOption, true);\n            });\n            let debug = this.debug;\n            if (!debug && debug !== false && this.service.config.debug) {\n                debug = this.service.config.debug;\n            }\n            let formats = this.formats;\n            if (!formats && formats === undefined) {\n                formats = this.service.config.formats ?\n                    Object.assign({}, this.service.config.formats) : (this.service.config.formats === null ? null : undefined);\n            }\n            const theme = this.theme || (this.service.config.theme ? this.service.config.theme : 'snow');\n            this.editorElem = this.elementRef.nativeElement.querySelector('[quill-view-element]');\n            this.zone.runOutsideAngular(() => {\n                this.quillEditor = new Quill(this.editorElem, {\n                    debug: debug,\n                    formats: formats,\n                    modules,\n                    readOnly: true,\n                    strict: this.strict,\n                    theme\n                });\n            });\n            this.renderer.addClass(this.editorElem, 'ngx-quill-view');\n            if (this.content) {\n                this.valueSetter(this.quillEditor, this.content);\n            }\n            // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n            // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n            if (!this.onEditorCreated.observers.length) {\n                return;\n            }\n            // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n            // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n            // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n            requestAnimationFrame(() => {\n                this.onEditorCreated.emit(this.quillEditor);\n                this.onEditorCreated.complete();\n            });\n        });\n    }\n    ngOnDestroy() {\n        this.quillSubscription?.unsubscribe();\n        this.quillSubscription = null;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillViewComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i0.NgZone }, { token: QuillService }, { token: i2.DomSanitizer }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.5\", type: QuillViewComponent, isStandalone: true, selector: \"quill-view\", inputs: { format: \"format\", theme: \"theme\", modules: \"modules\", debug: \"debug\", formats: \"formats\", sanitize: \"sanitize\", beforeRender: \"beforeRender\", strict: \"strict\", content: \"content\", customModules: \"customModules\", customOptions: \"customOptions\", preserveWhitespace: \"preserveWhitespace\" }, outputs: { onEditorCreated: \"onEditorCreated\" }, usesOnChanges: true, ngImport: i0, template: `\n<div quill-view-element *ngIf=\"!preserve\"></div>\n<pre quill-view-element *ngIf=\"preserve\"></pre>\n`, isInline: true, styles: [\".ql-container.ngx-quill-view{border:0}\\n\"], dependencies: [{ kind: \"ngmodule\", type: CommonModule }, { kind: \"directive\", type: i1.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], encapsulation: i0.ViewEncapsulation.None }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillViewComponent, decorators: [{\n            type: Component,\n            args: [{ encapsulation: ViewEncapsulation.None, selector: 'quill-view', template: `\n<div quill-view-element *ngIf=\"!preserve\"></div>\n<pre quill-view-element *ngIf=\"preserve\"></pre>\n`, standalone: true, imports: [CommonModule], styles: [\".ql-container.ngx-quill-view{border:0}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.NgZone }, { type: QuillService }, { type: i2.DomSanitizer }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; }, propDecorators: { format: [{\n                type: Input\n            }], theme: [{\n                type: Input\n            }], modules: [{\n                type: Input\n            }], debug: [{\n                type: Input\n            }], formats: [{\n                type: Input\n            }], sanitize: [{\n                type: Input\n            }], beforeRender: [{\n                type: Input\n            }], strict: [{\n                type: Input\n            }], content: [{\n                type: Input\n            }], customModules: [{\n                type: Input\n            }], customOptions: [{\n                type: Input\n            }], preserveWhitespace: [{\n                type: Input\n            }], onEditorCreated: [{\n                type: Output\n            }] } });\n\nclass QuillModule {\n    static forRoot(config) {\n        return {\n            ngModule: QuillModule,\n            providers: [\n                {\n                    provide: QUILL_CONFIG_TOKEN,\n                    useValue: config\n                }\n            ]\n        };\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule }); }\n    static { this.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillModule, imports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent], exports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent] }); }\n    static { this.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillModule, imports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent] }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.5\", ngImport: i0, type: QuillModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent],\n                    exports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-quill\n */\n// Re-export everything from the secondary entry-point so we can be backwards-compatible\n// and don't introduce breaking changes for consumers.\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { QuillEditorBase, QuillEditorComponent, QuillModule, QuillService, QuillViewComponent, QuillViewHTMLComponent };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}