{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./service/app.layout.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./app.menu.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"primeng/ripple\";\nconst _c0 = [\"app-menuitem\", \"\"];\nfunction AppMenuitemComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.item.label);\n  }\n}\nfunction AppMenuitemComponent_a_2_i_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 9);\n  }\n}\nfunction AppMenuitemComponent_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 5);\n    i0.ɵɵlistener(\"click\", function AppMenuitemComponent_a_2_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.itemClick($event));\n    });\n    i0.ɵɵelement(1, \"i\", 6);\n    i0.ɵɵelementStart(2, \"span\", 7);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AppMenuitemComponent_a_2_i_4_Template, 1, 0, \"i\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.item.class);\n    i0.ɵɵattribute(\"href\", ctx_r1.item.url, i0.ɵɵsanitizeUrl)(\"target\", ctx_r1.item.target);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.item.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.item.label);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.item.items);\n  }\n}\nfunction AppMenuitemComponent_a_3_i_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 9);\n  }\n}\nconst _c1 = function () {\n  return {\n    paths: \"exact\",\n    queryParams: \"ignored\",\n    matrixParams: \"ignored\",\n    fragment: \"ignored\"\n  };\n};\nfunction AppMenuitemComponent_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 10);\n    i0.ɵɵlistener(\"click\", function AppMenuitemComponent_a_3_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.itemClick($event));\n    });\n    i0.ɵɵelement(1, \"i\", 6);\n    i0.ɵɵelementStart(2, \"span\", 7);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AppMenuitemComponent_a_3_i_4_Template, 1, 0, \"i\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.item.class)(\"routerLink\", ctx_r2.item.routerLink)(\"routerLinkActiveOptions\", ctx_r2.item.routerLinkActiveOptions || i0.ɵɵpureFunction0(14, _c1))(\"fragment\", ctx_r2.item.fragment)(\"queryParamsHandling\", ctx_r2.item.queryParamsHandling)(\"preserveFragment\", ctx_r2.item.preserveFragment)(\"skipLocationChange\", ctx_r2.item.skipLocationChange)(\"replaceUrl\", ctx_r2.item.replaceUrl)(\"state\", ctx_r2.item.state)(\"queryParams\", ctx_r2.item.queryParams);\n    i0.ɵɵattribute(\"target\", ctx_r2.item.target);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.item.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.item.label);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.item.items);\n  }\n}\nfunction AppMenuitemComponent_ul_4_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"li\", 12);\n  }\n  if (rf & 2) {\n    const child_r11 = ctx.$implicit;\n    const i_r12 = ctx.index;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(child_r11.badgeClass);\n    i0.ɵɵproperty(\"item\", child_r11)(\"index\", i_r12)(\"parentKey\", ctx_r10.key);\n  }\n}\nfunction AppMenuitemComponent_ul_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, AppMenuitemComponent_ul_4_ng_template_1_Template, 1, 5, \"ng-template\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@children\", ctx_r3.submenuAnimation);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.item.items);\n  }\n}\nexport let AppMenuitemComponent = /*#__PURE__*/(() => {\n  class AppMenuitemComponent {\n    constructor(layoutService, cd, router, menuService) {\n      this.layoutService = layoutService;\n      this.cd = cd;\n      this.router = router;\n      this.menuService = menuService;\n      this.active = false;\n      this.key = \"\";\n      this.menuSourceSubscription = this.menuService.menuSource$.subscribe(value => {\n        Promise.resolve(null).then(() => {\n          if (value.routeEvent) {\n            this.active = value.key === this.key || value.key.startsWith(this.key + '-') ? true : false;\n          } else {\n            if (value.key !== this.key && !value.key.startsWith(this.key + '-')) {\n              this.active = false;\n            }\n          }\n        });\n      });\n      this.menuResetSubscription = this.menuService.resetSource$.subscribe(() => {\n        this.active = false;\n      });\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(params => {\n        if (this.item.routerLink) {\n          this.updateActiveStateFromRoute();\n        }\n      });\n    }\n    ngOnInit() {\n      this.key = this.parentKey ? this.parentKey + '-' + this.index : String(this.index);\n      if (this.item.routerLink) {\n        this.updateActiveStateFromRoute();\n      }\n    }\n    updateActiveStateFromRoute() {\n      let activeRoute = this.router.isActive(this.item.routerLink[0], {\n        paths: 'exact',\n        queryParams: 'ignored',\n        matrixParams: 'ignored',\n        fragment: 'ignored'\n      });\n      if (activeRoute) {\n        this.menuService.onMenuStateChange({\n          key: this.key,\n          routeEvent: true\n        });\n      }\n    }\n    itemClick(event) {\n      // avoid processing disabled items\n      if (this.item.disabled) {\n        event.preventDefault();\n        return;\n      }\n      // execute command\n      if (this.item.command) {\n        this.item.command({\n          originalEvent: event,\n          item: this.item\n        });\n      }\n      // toggle active state\n      if (this.item.items) {\n        this.active = !this.active;\n      }\n      this.menuService.onMenuStateChange({\n        key: this.key\n      });\n    }\n    get submenuAnimation() {\n      return this.root ? 'expanded' : this.active ? 'expanded' : 'collapsed';\n    }\n    get activeClass() {\n      return this.active && !this.root;\n    }\n    ngOnDestroy() {\n      if (this.menuSourceSubscription) {\n        this.menuSourceSubscription.unsubscribe();\n      }\n      if (this.menuResetSubscription) {\n        this.menuResetSubscription.unsubscribe();\n      }\n    }\n    static #_ = this.ɵfac = function AppMenuitemComponent_Factory(t) {\n      return new (t || AppMenuitemComponent)(i0.ɵɵdirectiveInject(i1.LayoutService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MenuService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppMenuitemComponent,\n      selectors: [[\"\", \"app-menuitem\", \"\"]],\n      hostVars: 4,\n      hostBindings: function AppMenuitemComponent_HostBindings(rf, ctx) {\n        if (rf & 2) {\n          i0.ɵɵclassProp(\"layout-root-menuitem\", ctx.root)(\"active-menuitem\", ctx.activeClass);\n        }\n      },\n      inputs: {\n        item: \"item\",\n        index: \"index\",\n        root: \"root\",\n        parentKey: \"parentKey\"\n      },\n      attrs: _c0,\n      decls: 5,\n      vars: 4,\n      consts: [[\"class\", \"layout-menuitem-root-text\", 4, \"ngIf\"], [\"tabindex\", \"0\", \"pRipple\", \"\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [\"routerLinkActive\", \"active-route\", \"tabindex\", \"0\", \"pRipple\", \"\", 3, \"ngClass\", \"routerLink\", \"routerLinkActiveOptions\", \"fragment\", \"queryParamsHandling\", \"preserveFragment\", \"skipLocationChange\", \"replaceUrl\", \"state\", \"queryParams\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"layout-menuitem-root-text\"], [\"tabindex\", \"0\", \"pRipple\", \"\", 3, \"ngClass\", \"click\"], [1, \"layout-menuitem-icon\", 3, \"ngClass\"], [1, \"layout-menuitem-text\"], [\"class\", \"pi pi-fw pi-angle-down layout-submenu-toggler\", 4, \"ngIf\"], [1, \"pi\", \"pi-fw\", \"pi-angle-down\", \"layout-submenu-toggler\"], [\"routerLinkActive\", \"active-route\", \"tabindex\", \"0\", \"pRipple\", \"\", 3, \"ngClass\", \"routerLink\", \"routerLinkActiveOptions\", \"fragment\", \"queryParamsHandling\", \"preserveFragment\", \"skipLocationChange\", \"replaceUrl\", \"state\", \"queryParams\", \"click\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"app-menuitem\", \"\", 3, \"item\", \"index\", \"parentKey\"]],\n      template: function AppMenuitemComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementContainerStart(0);\n          i0.ɵɵtemplate(1, AppMenuitemComponent_div_1_Template, 2, 1, \"div\", 0);\n          i0.ɵɵtemplate(2, AppMenuitemComponent_a_2_Template, 5, 6, \"a\", 1);\n          i0.ɵɵtemplate(3, AppMenuitemComponent_a_3_Template, 5, 15, \"a\", 2);\n          i0.ɵɵtemplate(4, AppMenuitemComponent_ul_4_Template, 2, 2, \"ul\", 3);\n          i0.ɵɵelementContainerEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.root && ctx.item.visible !== false);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (!ctx.item.routerLink || ctx.item.items) && ctx.item.visible !== false);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.item.routerLink && !ctx.item.items && ctx.item.visible !== false);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.item.items && ctx.item.visible !== false);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.Ripple, i2.RouterLink, i2.RouterLinkActive, AppMenuitemComponent],\n      encapsulation: 2,\n      data: {\n        animation: [trigger('children', [state('collapsed', style({\n          height: '0'\n        })), state('expanded', style({\n          height: '*'\n        })), transition('collapsed <=> expanded', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))])]\n      }\n    });\n  }\n  return AppMenuitemComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}